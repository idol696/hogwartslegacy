DROP SCHEMA IF EXISTS test2 CASCADE;
CREATE SCHEMA IF NOT EXISTS test2;

-- Таблица машин
CREATE TABLE test2.cars
(
    id BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    brand VARCHAR(100) NOT NULL,
    model VARCHAR(100) NOT NULL,
    cost NUMERIC(10, 2) NOT NULL,
    CONSTRAINT cars_brand_model_unique UNIQUE (brand, model)
);

-- Таблица водителей
CREATE TABLE test2.drivers
(
    id BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR(100) NOT NULL UNIQUE,
    age INTEGER DEFAULT 20 CHECK (age >= 16),
    has_license BOOLEAN NOT NULL,
    car_id BIGINT,
    CONSTRAINT fk_car FOREIGN KEY (car_id) REFERENCES test2.cars (id) ON DELETE SET NULL
);